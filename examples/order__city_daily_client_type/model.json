{
    "dimensions": [
        {
            "name": "date",
            "label": "Date",
            "role": "time",
            "levels": [
                {
                    "name": "year",
                    "label": "Year",
                    "attributes": [
                        {
                            "name": "year",
                            "order": "asc"
                        }
                    ]
                },
                {
                    "name": "quarter",
                    "label": "Quarter",
                    "attributes": [
                        {
                            "name": "quarter",
                            "order": "asc"
                        }
                    ]
                },
                {
                    "name": "month",
                    "label": "Month",
                    "attributes": [
                        {
                            "name": "month",
                            "order": "asc"
                        },
                        {
                            "name": "month_name"
                        }
                    ]
                },
                {
                    "name": "day",
                    "label": "Day",
                    "attributes": [
                        {
                            "name": "day",
                            "order": "asc"
                        }
                    ]
                },
                {
                    "name": "day_of_week",
                    "label": "Day of Week",
                    "attributes": [
                        {
                            "name": "day_of_week",
                            "order": "asc"
                        },
                        {
                            "name": "day_name"
                        }
                    ]
                }
            ],
            "hierarchies": [
                {
                    "name": "ymd",
                    "levels": [
                        "year",
                        "month",
                        "day"
                    ]
                },
                {
                    "name": "yqmd",
                    "levels": [
                        "year",
                        "quarter",
                        "month",
                        "day"
                    ]
                },
                {
                    "name": "weekday",
                    "levels": [
                        "day_of_week"
                    ]
                }
            ]
        },
        {
            "name": "city",
            "label": "City",
            "levels": [
                {
                    "name": "rank",
                    "label": "City Rank",
                    "attributes": [
                        {
                            "name": "rank"
                        }
                    ]
                },
                {
                    "name": "cityid",
                    "label": "City",
                    "attributes": [
                        {
                            "name": "cityid"
                        },
                        {
                            "name": "name"
                        }
                    ]
                },
                {
                    "name": "region_id",
                    "label": "Region",
                    "attributes": [
                        {
                            "name": "region_id"
                        },
                        {
                            "name": "region_name"
                        }
                    ]
                },
                {
                    "name": "district_id",
                    "label": "District",
                    "attributes": [
                        {
                            "name": "district_id"
                        },
                        {
                            "name": "district_name"
                        }
                    ]
                }
            ],
            "hierarchies": [
                {
                    "name": "city_rank",
                    "levels": [
                        "rank",
                        "cityid"
                    ]
                },
                {
                    "name": "city_region",
                    "levels": [
                        "region_id",
                        "district_id",
                        "cityid"
                    ]
                }
            ]
        },
        {
            "name": "clienttype",
            "label": "Client Type"
        },
        {
            "name": "dealcategory",
            "label": "Dealcategory",
            "levels": [
                {
                    "name": "typeid",
                    "label": "Deal Category",
                    "attributes": [
                        {
                            "name": "typeid"
                        }
                    ]
                },
                {
                    "name": "level",
                    "label": "Deal Category level",
                    "attributes": [
                        {
                            "name": "level"
                        }
                    ]
                },
                {
                    "name": "classid",
                    "label": "Class",
                    "attributes": [
                        {
                            "name": "classid"
                        },
                        {
                            "name": "classname"
                        }
                    ]
                },
                {
                    "name": "categoryid",
                    "label": "Category",
                    "attributes": [
                        {
                            "name": "categoryid"
                        },
                        {
                            "name": "categoryname"
                        }
                    ]
                }
            ],
            "hierarchies": [
                {
                    "name": "dealcategory_level",
                    "levels": [
                        "level",
                        "typeid"
                    ]
                }
            ]
        }
    ],
    "cubes": [
        {
            "name": "order__city_daily_client_type",
            "dimensions": [
                "date", "city", "clienttype", "dealcategory"
            ],
            "joins": [
                {
                    "master": "datekey",
                    "detail": {
                        "schema" :"dim",
                        "table": "date",
                        "column": "datekey"
                    }
                },
                {
                    "master": "cityid",
                    "detail": {
                        "schema" :"dim",
                        "table": "city",
                        "column": "cityid"
                    }
                },
                {
                    "master": "typeid",
                    "detail": {
                        "schema" :"dim",
                        "table": "dealcategory",
                        "column": "typeid"
                    }
                }
            ],
            "measures": [
                {
                    "name": "order_count",
                    "label": "Order Count"
                },
                {
                    "name": "pay_count",
                    "label": "Pay Count"
                },
                {
                    "name": "quantity",
                    "label": "Quantity"
                },
                {
                    "name": "revenue",
                    "label": "Revenue"
                },
                {
                    "name": "profit",
                    "label": "Profit"
                },
                {
                    "name": "rebate",
                    "label": "Pay Count"
                },
                {
                    "name": "giftcard",
                    "label": "Giftcard"
                },
                {
                    "name": "recharge",
                    "label": "Recharge"
                },
                {
                    "name": "direct",
                    "label": "Direct"
                },
                {
                    "name": "magiccard",
                    "label": "Magiccard"
                },
                {
                    "name": "buyer_count",
                    "label": "Buyer Count"
                },
                {
                    "name": "first_buyer_count",
                    "label": "First Buyer Count"
                },
                {
                    "name": "client_first_buyer_count",
                    "label": "Client First Buyer Count"
                }
            ],
            "aggregates": [
                {
                    "name": "order_count_sum",
                    "function": "sum",
                    "measure": "order_count"
                },
                {
                    "name": "pay_count_sum",
                    "function": "sum",
                    "measure": "pay_count"
                },
                {
                    "name": "quantity_sum",
                    "function": "sum",
                    "measure": "quantity"
                },
                {
                    "name": "revenue_sum",
                    "function": "sum",
                    "measure": "revenue"
                },
                {
                    "name": "profit_sum",
                    "function": "sum",
                    "measure": "profit"
                },
                {
                    "name": "rebate_sum",
                    "function": "sum",
                    "measure": "rebate"
                },
                {
                    "name": "giftcard_sum",
                    "function": "sum",
                    "measure": "giftcard"
                },
                {
                    "name": "recharge_sum",
                    "function": "sum",
                    "measure": "recharge"
                },
                {
                    "name": "direct_sum",
                    "function": "sum",
                    "measure": "direct"
                },
                {
                    "name": "magiccard_sum",
                    "function": "sum",
                    "measure": "magiccard"
                },
                {
                    "name": "buyer_count_sum",
                    "function": "sum",
                    "measure": "buyer_count"
                },
                {
                    "name": "first_buyer_count_sum",
                    "function": "sum",
                    "measure": "first_buyer_count"
                },
                {
                    "name": "client_first_buyer_count_sum",
                    "function": "sum",
                    "measure": "client_first_buyer_count"
                }
            ],
            "mappings": {
                "date.day" : {
                  "schema": "dim",
                  "table": "date",
                  "column": "datekey"
                }
            }
        }
    ]
}
